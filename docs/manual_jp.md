# MP3 to MP4 Converter - ユーザーマニュアル

**バージョン**: 1.0  
**最終更新日**: 2025年10月24日  
**対応OS**: Windows 10以降、macOS 12以降

---

## 目次

1. [概要](#概要)
2. [主な機能](#主な機能)
3. [動作環境](#動作環境)
4. [インストール](#インストール)
5. [基本的な使い方](#基本的な使い方)
6. [詳細機能](#詳細機能)
7. [設定](#設定)
8. [トラブルシューティング](#トラブルシューティング)
9. [よくある質問（FAQ）](#よくある質問faq)
10. [お問い合わせ](#お問い合わせ)

---

## 概要

**MP3 to MP4 Converter**は、MP3音声ファイルをMP4動画ファイルに変換するためのデスクトップアプリケーションです。ドラッグ&ドロップの簡単な操作で、音声ファイルに黒い背景の動画トラックを追加し、YouTubeなどの動画プラットフォームにアップロード可能な形式に変換します。

### アプリケーションの特徴

- **シンプルな操作**: ファイルをドラッグ&ドロップするだけで変換開始
- **バッチ処理**: 複数のMP3ファイルを一度に変換可能
- **進捗確認**: 各ファイルの変換状況をリアルタイムで表示
- **エラーハンドリング**: 問題が発生した場合も分かりやすいメッセージで通知
- **インストール不要**: すぐに使用できるスタンドアロン版を提供

---

## 主な機能

### 1. 単一ファイル変換

MP3ファイルを1つずつ変換できます。

- ドラッグ&ドロップで簡単操作
- 変換進捗をプログレスバーで表示
- 変換完了後、自動的に出力先フォルダを表示可能

### 2. バッチ変換（複数ファイル一括変換）

複数のMP3ファイルを選択して、一度に変換できます。

- 最大50ファイルまで同時処理可能
- 各ファイルの進捗を個別に表示
- 変換中のキャンセル、一時停止、再開が可能

### 3. ファイル検証

変換前に自動的にファイルをチェックします。

- MP3形式の確認
- ファイル破損の検出
- ファイルサイズの検証（大きすぎる場合は警告）
- 対応していないファイル形式を事前にお知らせ

### 4. エラーリカバリー

問題が発生した場合も安心して使用できます。

- 分かりやすい日本語のエラーメッセージ
- エラーが発生したファイルをスキップして続行可能
- 変換失敗時のリトライ機能
- エラーログの保存（トラブルシューティング用）

### 5. カスタマイズ設定

ユーザーの好みに合わせて設定をカスタマイズできます。

- 出力先フォルダの選択
- ファイル名の規則設定
- 動画の解像度選択（1280x720、1920x1080など）
- ビットレート設定

---

## 動作環境

### 必須要件

#### Windows
- **OS**: Windows 10（64ビット）以降
- **メモリ**: 最小 2GB RAM（推奨 4GB以上）
- **ディスク空き容量**: 最小 500MB
- **その他**: .NET Framework 4.7.2以降（通常は自動インストール済み）

#### macOS
- **OS**: macOS 12 Monterey以降
- **メモリ**: 最小 2GB RAM（推奨 4GB以上）
- **ディスク空き容量**: 最小 500MB
- **プロセッサ**: Intel または Apple Silicon（M1/M2/M3）対応

### 推奨要件

- **メモリ**: 8GB RAM以上
- **ディスク空き容量**: 2GB以上（大量のファイル変換時）
- **ディスプレイ**: 1280x720以上の解像度

---

## インストール

詳細なインストール手順については、別途「[インストールガイド](installation_jp.md)」をご参照ください。

### 簡易インストール手順（Windows）

1. **ダウンロード**: 
   - リリースページから `MP3toMP4Converter-Windows.zip` をダウンロード

2. **解凍**: 
   - ダウンロードしたZIPファイルを任意のフォルダに解凍

3. **実行**: 
   - `MP3toMP4Converter.exe` をダブルクリックで起動

4. **FFmpegの確認**: 
   - 初回起動時にFFmpegの存在を自動確認
   - FFmpegが見つからない場合は、[FFmpegセットアップガイド](ffmpeg_setup_jp.md)を参照

### 簡易インストール手順（macOS）

1. **ダウンロード**: 
   - リリースページから `MP3toMP4Converter-macOS.dmg` をダウンロード

2. **インストール**: 
   - DMGファイルを開き、アプリケーションフォルダにドラッグ&ドロップ

3. **初回起動**: 
   - アプリケーションフォルダから起動
   - 「開発元を確認できません」と表示された場合は、右クリック→「開く」を選択

4. **FFmpegの確認**: 
   - 初回起動時にFFmpegの存在を自動確認
   - FFmpegが見つからない場合は、[FFmpegセットアップガイド](ffmpeg_setup_jp.md)を参照

---

## 基本的な使い方

### 起動方法

#### Windows
`MP3toMP4Converter.exe` をダブルクリックしてアプリケーションを起動します。

#### macOS
アプリケーションフォルダから `MP3toMP4Converter` を起動します。

### 単一ファイルの変換

**手順：**

1. アプリケーションを起動します
2. MP3ファイルをアプリケーションウィンドウにドラッグ&ドロップします
   - または「ファイルを選択」ボタンをクリックしてファイルを選択
3. 変換が自動的に開始されます
4. プログレスバーで進捗を確認できます
5. 変換完了後、MP4ファイルが元のMP3ファイルと同じフォルダに作成されます
   - デフォルトのファイル名: `元のファイル名.mp4`

**操作画面イメージ：**

```
┌─────────────────────────────────────────────┐
│  MP3 to MP4 Converter                    [_][□][×]│
├─────────────────────────────────────────────┤
│                                             │
│   ┌─────────────────────────────────────┐   │
│   │                                     │   │
│   │   ここにMP3ファイルを              │   │
│   │   ドラッグ&ドロップしてください     │   │
│   │                                     │   │
│   │         📁 または                    │   │
│   │    [ファイルを選択] ボタン           │   │
│   │                                     │   │
│   └─────────────────────────────────────┘   │
│                                             │
│   [ファイルを選択]  [設定]  [ヘルプ]        │
│                                             │
└─────────────────────────────────────────────┘
```

### 複数ファイルの一括変換（バッチ処理）

**手順：**

1. アプリケーションを起動します
2. 複数のMP3ファイルを選択します
   - Ctrlキー（macOSはCommandキー）を押しながらクリックで複数選択
   - または範囲選択（Shiftキー + クリック）
3. 選択したファイルをアプリケーションウィンドウにドラッグ&ドロップします
4. すべてのファイルが順次変換されます
5. 各ファイルの進捗が個別に表示されます

**バッチ処理中の操作画面イメージ：**

```
┌─────────────────────────────────────────────┐
│  MP3 to MP4 Converter - バッチ変換中     [_][□][×]│
├─────────────────────────────────────────────┤
│                                             │
│  変換中: 3/5 ファイル完了                   │
│                                             │
│  ① song1.mp3 ✓ 完了                         │
│  ② song2.mp3 ✓ 完了                         │
│  ③ song3.mp3 [████████░░] 80%              │
│  ④ song4.mp3 待機中                         │
│  ⑤ song5.mp3 待機中                         │
│                                             │
│  全体の進捗: [██████░░░░] 60%               │
│                                             │
│  [一時停止]  [キャンセル]                   │
│                                             │
└─────────────────────────────────────────────┘
```

### 変換の操作

#### 一時停止
- 「一時停止」ボタンをクリックすると、現在のファイルの変換を一時停止します
- 残りのファイルは待機状態になります

#### 再開
- 「再開」ボタンをクリックすると、一時停止した位置から変換を再開します

#### キャンセル
- 「キャンセル」ボタンをクリックすると、すべての変換処理を中止します
- 処理中のファイルは中断され、待機中のファイルは変換されません
- すでに完了したファイルは削除されません

---

## 詳細機能

### 出力設定のカスタマイズ

アプリケーションの「設定」メニューから、出力形式をカスタマイズできます。

#### 出力先フォルダの変更

**手順：**

1. メニューバーから「設定」→「出力設定」を選択
2. 「出力先フォルダ」セクションで「変更」ボタンをクリック
3. 保存先フォルダを選択
4. 「OK」をクリックして設定を保存

**デフォルト設定：** 元のMP3ファイルと同じフォルダ

#### ファイル名の規則変更

出力されるMP4ファイルの命名規則を設定できます。

**利用可能なパターン：**
- `{original}` - 元のファイル名（拡張子なし）
- `{date}` - 変換日（YYYY-MM-DD形式）
- `{time}` - 変換時刻（HH-MM-SS形式）
- `{index}` - 連番（バッチ処理時）

**例：**
- パターン: `{original}_converted`
- 入力: `song.mp3`
- 出力: `song_converted.mp4`

#### 動画設定

**解像度の選択：**
- 1280x720 (HD)
- 1920x1080 (Full HD) - デフォルト
- 3840x2160 (4K)

**ビットレート設定：**
- 音声ビットレート: 128kbps（標準）、192kbps（高品質）、320kbps（最高品質）
- 動画ビットレート: 自動（推奨）、カスタム

**背景色の選択：**
- 黒（デフォルト）
- 白
- カスタムカラー（RGB指定）

### ファイル検証の詳細

アプリケーションは変換前に以下の検証を実行します：

1. **ファイル形式の確認**
   - MP3形式であるかを検証
   - 対応していない形式の場合はエラーメッセージを表示

2. **ファイルサイズの確認**
   - 極端に小さいファイル（<10KB）は警告
   - 極端に大きいファイル（>500MB）は警告（変換可能だが時間がかかります）

3. **ファイル破損の検出**
   - ファイルヘッダーの整合性確認
   - 破損が検出された場合は変換を中止

4. **メタデータの読み取り**
   - アーティスト名、タイトル、アルバム情報を抽出
   - MP4ファイルにメタデータを引き継ぎ（オプション）

### ログとエラー管理

#### ログファイルの場所

変換のログはアプリケーションフォルダ内の `logs/` ディレクトリに保存されます。

**Windowsの場合：**
```
C:\Users\[ユーザー名]\AppData\Local\MP3toMP4Converter\logs\
```

**macOSの場合：**
```
~/Library/Application Support/MP3toMP4Converter/logs/
```

#### ログファイルの内容

- 変換開始・完了時刻
- 入力ファイル名と出力ファイル名
- 変換パラメータ（解像度、ビットレートなど）
- エラーメッセージとスタックトレース

#### ログの確認方法

1. メニューバーから「ヘルプ」→「ログを表示」を選択
2. ログビューアーが開き、最新のログを確認できます
3. 「ログフォルダを開く」ボタンでログファイルの場所を開けます

---

## 設定

### 設定画面の開き方

メニューバーから「設定」を選択、または `Ctrl + ,`（macOSは `Cmd + ,`）を押します。

### 一般設定

#### 起動時の動作
- [ ] アプリケーション起動時に前回の変換状態を復元する
- [ ] Windowsスタートアップに登録する（Windows版のみ）

#### 通知設定
- [ ] 変換完了時にデスクトップ通知を表示
- [ ] 変換完了時に音を鳴らす
- [ ] エラー発生時に通知を表示

#### パフォーマンス設定
- 同時変換数: 1（推奨）～ 4
  - ※複数同時変換は高性能PCでのみ推奨
- メモリ使用制限: 自動 / 256MB / 512MB / 1GB

### 出力設定

#### 基本設定
- 出力先フォルダ: `元のフォルダ` / `カスタム`
- ファイル名パターン: `{original}`
- 既存ファイルの処理: `上書き` / `スキップ` / `リネーム`

#### 動画品質設定
- 解像度: 720p / 1080p / 4K
- 動画ビットレート: 自動 / カスタム
- 音声ビットレート: 128kbps / 192kbps / 320kbps
- フレームレート: 30fps（固定）

#### 背景設定
- 背景色: 黒 / 白 / カスタム
- 背景画像: なし / カスタム画像を選択
  - ※対応形式: PNG, JPG, BMP

### 高度な設定

#### FFmpeg設定
- FFmpegパス: 自動検出 / カスタムパス指定
- FFmpegオプション: カスタムコマンドラインオプション
  - ※上級ユーザー向け機能

#### デバッグ設定
- [ ] 詳細ログを有効にする
- [ ] 変換後に一時ファイルを削除しない（デバッグ用）
- [ ] FFmpegコマンドをコンソールに表示

---

## トラブルシューティング

### よくある問題と解決方法

#### 1. アプリケーションが起動しない

**症状：**
- ダブルクリックしても何も起こらない
- エラーメッセージが表示される

**解決方法：**

**Windows:**
1. .NET Framework 4.7.2以降がインストールされているか確認
   - Windows Updateで最新版に更新
2. セキュリティソフトがブロックしていないか確認
   - Windows Defenderの除外リストに追加
3. 管理者権限で実行してみる
   - 右クリック→「管理者として実行」

**macOS:**
1. macOS 12以降であることを確認
2. Gatekeeperの設定を確認
   - 右クリック→「開く」で初回起動
3. ターミナルで以下のコマンドを実行：
   ```bash
   xattr -cr /Applications/MP3toMP4Converter.app
   ```

#### 2. FFmpegが見つからない

**症状：**
- 「FFmpegが見つかりません」というエラーが表示される
- 変換が開始できない

**解決方法：**

詳細は「[FFmpegセットアップガイド](ffmpeg_setup_jp.md)」を参照してください。

**簡易対応：**
1. アプリケーションフォルダ内の `ffmpeg/` ディレクトリを確認
2. FFmpegが存在しない場合は、公式サイトからダウンロード
3. 設定画面でFFmpegのパスを手動で指定

#### 3. 変換が途中で止まる

**症状：**
- プログレスバーが途中で動かなくなる
- 「応答なし」と表示される

**解決方法：**

1. **ファイルサイズが大きすぎる場合：**
   - 500MB以上のファイルは変換に時間がかかります
   - しばらく待つか、ファイルを分割して変換

2. **メモリ不足の場合：**
   - 他のアプリケーションを終了してメモリを解放
   - 設定でメモリ使用制限を下げる

3. **ディスク容量不足の場合：**
   - 出力先ドライブに十分な空き容量があるか確認
   - 少なくとも元のファイルの2倍の容量が必要

4. **一時的な問題の場合：**
   - アプリケーションを再起動
   - 変換を再試行

#### 4. 変換したMP4ファイルが再生できない

**症状：**
- 変換は完了したが、ファイルが開けない
- エラーメッセージが表示される

**解決方法：**

1. **ファイルサイズを確認：**
   - 0バイトまたは極端に小さい場合は変換失敗
   - 元のMP3ファイルが破損していないか確認

2. **メディアプレーヤーを変更：**
   - VLC Media Player など別のプレーヤーで試す
   - Windowsメディアプレーヤーはコーデック不足の可能性

3. **再変換を試す：**
   - 設定で音声ビットレートを下げる
   - 解像度を下げる（1080p → 720p）

#### 5. バッチ変換で一部のファイルが失敗する

**症状：**
- 複数ファイル変換時、一部がエラーになる
- エラーメッセージが表示される

**解決方法：**

1. **失敗したファイルを確認：**
   - ログファイルでエラーの詳細を確認
   - ファイルが破損していないか検証

2. **個別に変換を試す：**
   - 失敗したファイルだけを単独で変換
   - エラーの原因を特定

3. **ファイル名の問題：**
   - 特殊文字が含まれていないか確認
   - 日本語ファイル名は通常問題ありませんが、一部の記号は避ける
   - 推奨: アルファベット、数字、ハイフン、アンダースコア

#### 6. 変換速度が遅い

**症状：**
- 小さいファイルでも変換に時間がかかる
- プログレスバーの進みが遅い

**解決方法：**

1. **PCの性能を確認：**
   - CPU使用率が100%に近い場合は正常（変換は重い処理）
   - バックグラウンドの不要なアプリを終了

2. **設定を調整：**
   - 解像度を下げる（4K → 1080p → 720p）
   - 音声ビットレートを下げる

3. **ハードウェアアクセラレーションを確認：**
   - 一部のGPUでハードウェアエンコードが利用可能
   - 設定→高度な設定→FFmpegオプションで調整

#### 7. 日本語ファイル名が文字化けする

**症状：**
- 出力ファイル名が文字化けする
- 日本語が表示されない

**解決方法：**

**Windows:**
1. システムのロケール設定を確認
   - コントロールパネル→地域→管理→システムロケールの変更
   - 「日本語」が選択されているか確認

**macOS:**
1. 通常は問題ありませんが、ファイル名をシンプルにする
2. 半角英数字を使用する

**共通:**
- 設定でファイル名パターンを変更し、シンプルな名前にする

---

## よくある質問（FAQ）

### Q1: MP3以外の音声ファイル（WAV、FLACなど）も変換できますか？

**A:** 現在のバージョンではMP3形式のみ対応しています。将来のバージョンで他の形式のサポートを検討しています。

**回避策:** 他のツールでMP3に変換してから本アプリケーションを使用してください。

### Q2: 変換したMP4ファイルのサイズはどのくらいになりますか？

**A:** 出力ファイルのサイズは設定によって異なりますが、一般的には元のMP3ファイルよりも少し大きくなります。

**目安:**
- MP3ファイル（5MB）→ MP4ファイル（6～8MB）
- 解像度とビットレートを下げるとファイルサイズを小さくできます

### Q3: YouTubeにアップロードできる形式ですか？

**A:** はい、本アプリケーションで変換したMP4ファイルはYouTubeにアップロード可能な標準的な形式（H.264 + AAC）です。

### Q4: 動画に背景画像を追加できますか?

**A:** はい、設定画面から背景画像を指定できます。

**手順:**
1. 設定→出力設定→背景設定
2. 「背景画像」で「カスタム画像を選択」
3. PNG、JPG、BMP形式の画像を選択

### Q5: 変換中にPCをスリープにしても大丈夫ですか?

**A:** いいえ、変換中にPCがスリープすると変換が中断されます。

**対策:**
- 変換中はスリープ設定を無効にするか、電源接続を推奨
- 長時間の変換の場合は、夜間など使用しない時間帯に実行

### Q6: コマンドラインから使用できますか?

**A:** はい、コマンドラインインターフェースも提供しています。

**使用例:**
```bash
# Windows
MP3toMP4Converter.exe --input song.mp3 --output song.mp4

# macOS
./MP3toMP4Converter --input song.mp3 --output song.mp4

# バッチ処理
MP3toMP4Converter.exe --batch --input-dir ./mp3files/ --output-dir ./mp4files/
```

**詳細:** `MP3toMP4Converter.exe --help` でヘルプを表示

### Q7: 商用利用は可能ですか？

**A:** はい、本アプリケーションは商用利用可能です。ただし、FFmpegのライセンス（LGPL）に従う必要があります。

### Q8: オフラインで使用できますか?

**A:** はい、インターネット接続は不要です。すべての処理はローカルで実行されます。

### Q9: 複数のPCにインストールできますか?

**A:** はい、制限なく複数のPCにインストールできます。

### Q10: アンインストール方法は?

**Windows:**
1. アプリケーションフォルダを削除
2. 以下のフォルダも削除（設定とログが保存されています）：
   ```
   C:\Users\[ユーザー名]\AppData\Local\MP3toMP4Converter\
   ```

**macOS:**
1. アプリケーションをゴミ箱に移動
2. 以下のフォルダも削除（設定とログが保存されています）：
   ```
   ~/Library/Application Support/MP3toMP4Converter/
   ```

---

## お問い合わせ

### サポート

技術的な問題や質問がある場合は、以下の方法でお問い合わせください：

1. **GitHubリポジトリ**: 
   - Issue（問題報告）: [GitHub Issues](https://github.com/RyoWakabayashi/mp3_2_mp4/issues)
   - Discussions（質問・議論）: [GitHub Discussions](https://github.com/RyoWakabayashi/mp3_2_mp4/discussions)

2. **ドキュメント**:
   - [インストールガイド](installation_jp.md)
   - [FFmpegセットアップガイド](ffmpeg_setup_jp.md)
   - [ビルドガイド](build.md)（開発者向け）

### バグ報告

バグを発見した場合は、以下の情報を含めてGitHub Issuesに報告してください：

1. 使用しているOSとバージョン（例: Windows 11、macOS 14 Sonoma）
2. アプリケーションのバージョン
3. 発生したエラーメッセージ（スクリーンショット推奨）
4. 再現手順（できるだけ詳細に）
5. ログファイル（可能であれば添付）

### 機能リクエスト

新しい機能の提案は、GitHub Discussionsの「Ideas」カテゴリでお願いします。

---

## ライセンスと著作権

**MP3 to MP4 Converter**
- Copyright (c) 2025 RyoWakabayashi
- ライセンス: MIT License

**FFmpeg**
- Copyright (c) FFmpeg developers
- ライセンス: LGPL v2.1 or later

本アプリケーションは、FFmpegを使用しています。FFmpegのライセンス条項については、[FFmpeg公式サイト](https://ffmpeg.org/legal.html)を参照してください。

---

## バージョン履歴

### Version 1.0.0（2025年10月）
- 初回リリース
- 単一ファイル変換機能
- バッチ変換機能
- ドラッグ&ドロップインターフェース
- 進捗表示
- エラーハンドリング
- 日本語マニュアル

---

**最終更新日**: 2025年10月24日  
**ドキュメントバージョン**: 1.0
